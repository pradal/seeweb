{% from 'templates/project/macro.jinja2' import project_condensed with context %}

{% extends "layout_view.jinja2" %}

{% block user_view_body %}

<div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Owned</h3>
  </div>
  <div class="panel-body">
    {% if allow_edit %}
        <div class="row">
            <div class="col-md-12">
                <form action="{{ request.route_url('user_view_projects', uid=user.id) }}" method='POST'>
                    <div class="form-group">
                        <button class="btn btn-primary pull-right" type="submit" name="new_project">Create</button>
                        <input type='text' name='project_id' placeholder='new project id' />
                    </div>
                </form>
            </div>
        </div>
    {% endif %}
    {% if projects|length == 0 %}
        <div class="row">
            {% if allow_edit %}
            None yet. Create one?
            {% else %}
            This user has no public project.
            {% endif %}
        </div>
    {% else %}
        <div class="container">
            <div class="row">
                {% for role, project in projects %}
                    {{ project_condensed(project, role) }}
                {% endfor %}
            </div>
        </div>
    {% endif %}
  </div>
</div>
{% endblock %}
