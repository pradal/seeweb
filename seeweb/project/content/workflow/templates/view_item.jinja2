{% extends "templates/project/layout_content.jinja2" %}

{% block project_css -%}

<script type="text/javascript" src="{{ request.static_url('seeweb:project/content/workflow/static/requires.js') }}"></script>
<script type="text/javascript" src="{{ request.static_url('seeweb:project/content/workflow/static/eve.js') }}"></script>
<script type="text/javascript" src="{{ request.static_url('seeweb:project/content/workflow/static/raphael.js') }}"></script>
<script type="text/javascript" src="{{ request.static_url('seeweb:project/content/workflow/static/workflow.js') }}"></script>

{%- endblock %}

{% block project_content_body -%}

<p>uid: {{ cnt_item.id }}</p>

<div id="workflow_canvas">
    <p id="workflow_canvas_placeholder">Workflow visual display</p>
</div>

{%- endblock %}


{% block project_js %}
<script>
    window.onload = function() {
        var wkf = JSON.parse('{{ cnt_item.definition|safe }}');
        var nodes = JSON.parse('{{ ndef|safe }}');

        var paper = new Raphael(document.getElementById('workflow_canvas'), 800, 600);
        document.getElementById('workflow_canvas_placeholder').style.display = 'none';

        wv.draw_workflow(paper, wkf, nodes);
    }
</script>

{%- endblock %}
